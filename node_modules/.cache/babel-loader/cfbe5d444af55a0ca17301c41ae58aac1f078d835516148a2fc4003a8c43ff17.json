{"ast":null,"code":"import{useState,useEffect}from\"react\";import{db}from\"./firebase\";import{collection,addDoc,updateDoc,deleteDoc,doc,onSnapshot}from\"firebase/firestore\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function GroceryList(){const[items,setItems]=useState([]);const[newItem,setNewItem]=useState(\"\");const[editingItem,setEditingItem]=useState(null);const[editText,setEditText]=useState(\"\");// Fetch items from Firestore\nuseEffect(()=>{const unsubscribe=onSnapshot(collection(db,\"groceryItems\"),snapshot=>{const itemList=snapshot.docs.map(doc=>({id:doc.id,...doc.data()}));setItems(itemList);// Check for items that were checked more than 2 minutes ago\nitemList.forEach(item=>{if(item.purchased&&item.checkedAt){const checkedTime=new Date(item.checkedAt).getTime();const currentTime=new Date().getTime();if(currentTime-checkedTime>120000){// Delete the item if it's been checked for more than 2 minutes\ndeleteDoc(doc(db,\"groceryItems\",item.id));}}});});return()=>unsubscribe();},[]);// Add a new item\nconst addItem=async()=>{if(!newItem)return;await addDoc(collection(db,\"groceryItems\"),{name:newItem,quantity:1,purchased:false,createdAt:new Date().toISOString()});setNewItem(\"\");};// Remove an item\nconst removeItem=async id=>{await deleteDoc(doc(db,\"groceryItems\",id));};// Edit an item\nconst editItem=item=>{setEditingItem(item.id);setEditText(item.name);};// Save edited item\nconst saveEdit=async id=>{if(!editText.trim())return;await updateDoc(doc(db,\"groceryItems\",id),{name:editText});setEditingItem(null);};// Toggle purchased status\nconst togglePurchased=async(id,purchased)=>{if(!purchased){// Item is being checked\nconst checkedAt=new Date().toISOString();await updateDoc(doc(db,\"groceryItems\",id),{purchased:true,checkedAt:checkedAt});// Set a timeout to delete the item after 2 minutes\nconst timeoutId=setTimeout(async()=>{await deleteDoc(doc(db,\"groceryItems\",id));},120000);// 2 minutes = 120,000 milliseconds\n// Store the timeout ID in the item (optional, for cleanup)\nsetItems(prevItems=>prevItems.map(item=>item.id===id?{...item,timeoutId}:item));}else{// Item is being unchecked\nawait updateDoc(doc(db,\"groceryItems\",id),{purchased:false,checkedAt:null});// Clear the timeout if the item is unchecked\nconst item=items.find(item=>item.id===id);if(item!==null&&item!==void 0&&item.timeoutId){clearTimeout(item.timeoutId);}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Grocery List\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newItem,onChange:e=>setNewItem(e.target.value),placeholder:\"Add a new item\"}),/*#__PURE__*/_jsx(\"button\",{onClick:addItem,children:\"Add\"})]}),/*#__PURE__*/_jsx(\"ul\",{children:items.map(item=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item-content\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:item.purchased,onChange:()=>togglePurchased(item.id,item.purchased)}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-details\",children:[editingItem===item.id?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editText,onChange:e=>setEditText(e.target.value)}):/*#__PURE__*/_jsx(\"span\",{className:`grocery-item ${item.purchased?\"line-through\":\"\"}`,children:item.name}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:new Date(item.createdAt).toLocaleString()})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-actions\",children:[editingItem===item.id?/*#__PURE__*/_jsx(\"button\",{onClick:()=>saveEdit(item.id),className:\"bg-green-500\",children:\"\\u2705 Save\"}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>editItem(item),className:\"bg-yellow-500\",children:\"\\u270F\\uFE0F Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeItem(item.id),className:\"bg-red-500\",children:\"\\uD83D\\uDDD1 Delete\"})]})]},item.id))})]});}","map":{"version":3,"names":["useState","useEffect","db","collection","addDoc","updateDoc","deleteDoc","doc","onSnapshot","jsx","_jsx","jsxs","_jsxs","GroceryList","items","setItems","newItem","setNewItem","editingItem","setEditingItem","editText","setEditText","unsubscribe","snapshot","itemList","docs","map","id","data","forEach","item","purchased","checkedAt","checkedTime","Date","getTime","currentTime","addItem","name","quantity","createdAt","toISOString","removeItem","editItem","saveEdit","trim","togglePurchased","timeoutId","setTimeout","prevItems","find","clearTimeout","className","children","type","value","onChange","e","target","placeholder","onClick","checked","toLocaleString"],"sources":["/Users/saipreetham/Desktop/grocery-list-firebase/src/GroceryList.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { db } from \"./firebase\";\nimport {\n  collection,\n  addDoc,\n  updateDoc,\n  deleteDoc,\n  doc,\n  onSnapshot,\n} from \"firebase/firestore\";\n\nexport default function GroceryList() {\n  const [items, setItems] = useState([]);\n  const [newItem, setNewItem] = useState(\"\");\n  const [editingItem, setEditingItem] = useState(null);\n  const [editText, setEditText] = useState(\"\");\n\n  // Fetch items from Firestore\n  useEffect(() => {\n    const unsubscribe = onSnapshot(collection(db, \"groceryItems\"), (snapshot) => {\n      const itemList = snapshot.docs.map((doc) => ({\n        id: doc.id,\n        ...doc.data(),\n      }));\n      setItems(itemList);\n\n      // Check for items that were checked more than 2 minutes ago\n      itemList.forEach((item) => {\n        if (item.purchased && item.checkedAt) {\n          const checkedTime = new Date(item.checkedAt).getTime();\n          const currentTime = new Date().getTime();\n          if (currentTime - checkedTime > 120000) {\n            // Delete the item if it's been checked for more than 2 minutes\n            deleteDoc(doc(db, \"groceryItems\", item.id));\n          }\n        }\n      });\n    });\n    return () => unsubscribe();\n  }, []);\n\n  // Add a new item\n  const addItem = async () => {\n    if (!newItem) return;\n    await addDoc(collection(db, \"groceryItems\"), {\n      name: newItem,\n      quantity: 1,\n      purchased: false,\n      createdAt: new Date().toISOString(),\n    });\n    setNewItem(\"\");\n  };\n\n  // Remove an item\n  const removeItem = async (id) => {\n    await deleteDoc(doc(db, \"groceryItems\", id));\n  };\n\n  // Edit an item\n  const editItem = (item) => {\n    setEditingItem(item.id);\n    setEditText(item.name);\n  };\n\n  // Save edited item\n  const saveEdit = async (id) => {\n    if (!editText.trim()) return;\n    await updateDoc(doc(db, \"groceryItems\", id), { name: editText });\n    setEditingItem(null);\n  };\n\n  // Toggle purchased status\n  const togglePurchased = async (id, purchased) => {\n    if (!purchased) {\n      // Item is being checked\n      const checkedAt = new Date().toISOString();\n      await updateDoc(doc(db, \"groceryItems\", id), {\n        purchased: true,\n        checkedAt: checkedAt,\n      });\n\n      // Set a timeout to delete the item after 2 minutes\n      const timeoutId = setTimeout(async () => {\n        await deleteDoc(doc(db, \"groceryItems\", id));\n      }, 120000); // 2 minutes = 120,000 milliseconds\n\n      // Store the timeout ID in the item (optional, for cleanup)\n      setItems((prevItems) =>\n        prevItems.map((item) =>\n          item.id === id ? { ...item, timeoutId } : item\n        )\n      );\n    } else {\n      // Item is being unchecked\n      await updateDoc(doc(db, \"groceryItems\", id), {\n        purchased: false,\n        checkedAt: null,\n      });\n\n      // Clear the timeout if the item is unchecked\n      const item = items.find((item) => item.id === id);\n      if (item?.timeoutId) {\n        clearTimeout(item.timeoutId);\n      }\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      <h1>Grocery List</h1>\n      <div className=\"input-container\">\n        <input\n          type=\"text\"\n          value={newItem}\n          onChange={(e) => setNewItem(e.target.value)}\n          placeholder=\"Add a new item\"\n        />\n        <button onClick={addItem}>Add</button>\n      </div>\n\n      <ul>\n        {items.map((item) => (\n          <li key={item.id}>\n            {/* Left: Checkbox, Item Name, and Timestamp */}\n            <div className=\"item-content\">\n              <input\n                type=\"checkbox\"\n                checked={item.purchased}\n                onChange={() => togglePurchased(item.id, item.purchased)}\n              />\n              <div className=\"item-details\">\n                {editingItem === item.id ? (\n                  <input\n                    type=\"text\"\n                    value={editText}\n                    onChange={(e) => setEditText(e.target.value)}\n                  />\n                ) : (\n                  <span className={`grocery-item ${item.purchased ? \"line-through\" : \"\"}`}>\n                    {item.name}\n                  </span>\n                )}\n                <span className=\"text-xs\">{new Date(item.createdAt).toLocaleString()}</span>\n              </div>\n            </div>\n\n            {/* Right: Edit and Delete Buttons */}\n            <div className=\"item-actions\">\n              {editingItem === item.id ? (\n                <button onClick={() => saveEdit(item.id)} className=\"bg-green-500\">\n                  ‚úÖ Save\n                </button>\n              ) : (\n                <button onClick={() => editItem(item)} className=\"bg-yellow-500\">\n                  ‚úèÔ∏è Edit\n                </button>\n              )}\n              <button onClick={() => removeItem(item.id)} className=\"bg-red-500\">\n                üóë Delete\n              </button>\n            </div>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}